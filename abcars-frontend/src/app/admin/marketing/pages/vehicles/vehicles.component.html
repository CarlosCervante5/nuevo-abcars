<!-- <app-new-nav></app-new-nav> -->
<div class="container">
    <div class="row">
        <div class="col-12 mb-5 mt-4">
            <div class="row pb-2 mb-2">

                <div class="col-lg-3 col-md-6 col-sm-12 mb-2 padding-col">
                    <h4 class="fs-4 fw-bold text-truncate">Administrar Vehículos</h4>
                    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
                        <ol class="breadcrumb">
                        <li class="breadcrumb-item" [routerLink]="['/admin/marketing']">Overview</li>
                        <li class="breadcrumb-item active" aria-current="page">Vehículos</li>
                        </ol>
                    </nav>
                </div>
            
                <div class="col-lg-3 col-md-6 col-sm-12 mb-2 d-flex flex-wrap align-items-center justify-content-center border padding-col">
                    <button mat-button class="btn abcars-background-color-blue w-100" (click)="openStoreVehicleSheet()"> Crear vehículo </button>
                </div>
            
                <div class="col-lg-3 col-md-6 col-sm-12 mb-2 d-flex flex-wrap align-items-center border padding-col">
                    <label class="custom-file-upload my-1 flex-grow-1 w-100">
                        <input type="file" class="w-100" accept=".csv" required (change)="selectCsv($event)">
                        {{ load_vehicle_message }}
                    </label>
                    <button mat-button class="btn abcars-background-color-blue w-100 my-1" 
                        [disabled]="disabled" 
                        (click)="uploadCsv()">Subir
                    </button>
                </div>
            
                <div class="col-lg-3 col-md-6 col-sm-12 mb-2 d-flex flex-column align-items-center border padding-col">
                    <span class="mx-1 mb-2 w-100 text-truncate text-center">
                        Seleccionados: ( {{ this.vehicle_uuids.length }} )
                    </span>
                    <div class="d-flex w-100 justify-content-between flex-wrap">
                        <button mat-button class="btn abcars-background-color-blue mx-1 my-1"
                            [disabled]="this.vehicle_uuids.length === 0"
                            (click)="deleteSelectedVehicles()" 
                            matTooltip="Elimina seleccionados">
                        <div class="trash-content">
                            <img src="assets/icons-fontawesome/trash-solid.svg" alt="flecha" width="17px" height="17px">
                        </div>
                        </button>
                        <button mat-button class="btn custom-button mx-1 my-1"
                            [disabled]="this.vehicle_uuids.length === 0"
                            (click)="changeStatus('active')"
                            matTooltip="Activa seleccionados">
                            <div class="trash-content">
                                <img src="assets/icons-fontawesome/power-off-solid-green.svg" alt="flecha" width="20px" height="20px">
                            </div>
                        </button>
                        <button mat-button class="btn custom-button mx-1 my-1" 
                            [disabled]="this.vehicle_uuids.length === 0"
                            (click)="changeStatus('inactive')"
                            matTooltip="Desactiva seleccionados">
                            <div class="trash-content">
                                <img src="assets/icons-fontawesome/power-off-solid-red.svg" alt="flecha" width="20px" height="20px">
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        
            <!-- Input Search -->
            
            <div class="row">
                <div class="col-12">
                    <mat-form-field class="chip-list mt-5" appearance="outline">
                        <mat-label>Buscar por vin, marca, modelo, año...</mat-label>
                        <input matInput [(ngModel)]="palabra_busqueda" (keyup.enter)="getVehicles(1)">
                        <mat-icon matSuffix (click)="getVehicles(1)">search</mat-icon>
                    </mat-form-field>
                </div>
            </div>
            
        
            <!-- Vehicles -->
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-12 mt-2 mb-2" *ngFor="let vehicle of vehicles">
                    <app-a-vehicle [vehicle]="vehicle" (reload)="procesaPropagar($event)" (remove_vehicle_uuid)="removeVehicle_uuid($event)" (add_vehicle_uuid)="addVehicle_uuid($event)"></app-a-vehicle>                
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="row">
                <div class="col-12 mb-3 mb-5">
                    <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex - 1" aria-label="Select page" (page)="paginationChange($event)" #paginador>
                    </mat-paginator>                                        
                </div>
            </div>
        </div>
    </div>
</div>