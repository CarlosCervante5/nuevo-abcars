<div class="bg-white rounded-t-2xl p-6 min-h-screen md:min-h-0">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Información del Cliente -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Nombre(s) -->
        <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                Nombre(s)
            </label>
            <input
                id="name"
                type="text"
                formControlName="name"
                placeholder="Ingresa tu nombre"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="nameInvalid"
                [class.focus:ring-red-500]="nameInvalid"
            >
            <p *ngIf="nameInvalid" class="mt-2 text-sm text-red-600">
                Complete su nombre(s).
            </p>
        </div>

        <!-- Apellidos -->
        <div>
            <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">
                Apellidos
            </label>
            <input
                id="last_name"
                type="text"
                formControlName="last_name"
                placeholder="Ingresa tus apellidos"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="surnameInvalid"
                [class.focus:ring-red-500]="surnameInvalid"
            >
            <p *ngIf="surnameInvalid" class="mt-2 text-sm text-red-600">
                Complete sus apellidos
            </p>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Correo Electrónico -->
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                Correo Electrónico
            </label>
            <input
                id="email"
                type="email"
                formControlName="email"
                placeholder="Ingresa tu email"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="emailInvalid"
                [class.focus:ring-red-500]="emailInvalid"
            >
            <p *ngIf="emailInvalid" class="mt-2 text-sm text-red-600">
                Escriba un correo electrónico válido.
            </p>
        </div>

        <!-- Número de teléfono -->
        <div>
            <label for="phone_1" class="block text-sm font-medium text-gray-700 mb-2">
                Número de teléfono
            </label>
            <input
                id="phone_1"
                type="tel"
                formControlName="phone_1"
                placeholder="Ingresa tu número telefónico"
                #phone
                (keyup)="maxLengthCheck(phone)"
                maxlength="10"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="phoneLength"
                [class.focus:ring-red-500]="phoneLength"
            >
            <p *ngIf="phoneLength" class="mt-2 text-sm text-red-600">
                Su número debe ser de 10 dígitos, verifique.
            </p>
        </div>
    </div>

    <!-- Información del Vehículo -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Marca -->
        <div>
            <label for="brand_name" class="block text-sm font-medium text-gray-700 mb-2">
                Marca
            </label>
            <input
                id="brand_name"
                type="text"
                formControlName="brand_name"
                [matAutocomplete]="autoBrand"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="brandInvalid"
                [class.focus:ring-red-500]="brandInvalid"
            >
            <mat-autocomplete #autoBrand="matAutocomplete" (optionSelected)="onBrandSelected($event)">
                <mat-option *ngFor="let brand of filteredBrands | async" [value]="brand.name">
                    {{ brand.name }}
                </mat-option>
            </mat-autocomplete>
            <p *ngIf="brandInvalid" class="mt-2 text-sm text-red-600">
                Escribe la marca del vehículo.
            </p>
        </div>

        <!-- Modelo -->
        <div>
            <label for="model_name" class="block text-sm font-medium text-gray-700 mb-2">
                Modelo
            </label>
            <input
                id="model_name"
                type="text"
                formControlName="model_name"
                [matAutocomplete]="autoModel"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="modelInvalid"
                [class.focus:ring-red-500]="modelInvalid"
            >
            <mat-autocomplete #autoModel="matAutocomplete" (optionSelected)="onModelSelected($event)">
                <mat-option *ngFor="let model of filteredModels | async" [value]="model.name">
                    {{ model.name }}
                </mat-option>
            </mat-autocomplete>
            <p *ngIf="modelInvalid" class="mt-2 text-sm text-red-600">
                Escribe el modelo del vehículo.
            </p>
        </div>

        <!-- Año -->
        <div>
            <label for="year" class="block text-sm font-medium text-gray-700 mb-2">
                Año
            </label>
            <select
                id="year"
                formControlName="year"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 bg-white"
                [class.border-red-500]="yearInvalid"
                [class.focus:ring-red-500]="yearInvalid"
            >
                <option value="">Seleccione el año del vehículo</option>
                <option *ngFor="let year of years" [value]="year">{{ year }}</option>
            </select>
            <p *ngIf="yearInvalid" class="mt-2 text-sm text-red-600">
                Seleccione un año.
            </p>
        </div>

        <!-- Kilometraje -->
        <div>
            <label for="mileage" class="block text-sm font-medium text-gray-700 mb-2">
                Kilometraje
            </label>
            <input
                id="mileage"
                type="number"
                formControlName="mileage"
                placeholder="000000"
                min="1"
                max="9999999999"
                #mileage
                (keyup)="maxLengthCheck(mileage)"
                maxlength="10"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="mileageInvalid"
                [class.focus:ring-red-500]="mileageInvalid"
            >
            <p *ngIf="mileageInvalid" class="mt-2 text-sm text-red-600">
                Teclee el kilometraje de su vehículo.
            </p>
        </div>
    </div>

    <!-- Fecha y Hora de Cita -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Fecha de cita -->
        <div>
            <label for="scheduled_date" class="block text-sm font-medium text-gray-700 mb-2">
                Fecha de cita
            </label>
            <div class="relative">
                <input
                    id="scheduled_date"
                    matInput
                    [matDatepickerFilter]="myFilter"
                    [matDatepicker]="picker"
                    [min]="minDate"
                    [max]="maxDate"
                    formControlName="scheduled_date"
                    class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                    [class.border-red-500]="dateInvalid"
                    [class.focus:ring-red-500]="dateInvalid"
                >
                <mat-datepicker-toggle matSuffix [for]="picker" class="absolute right-2 top-1/2 transform -translate-y-1/2"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </div>
            <p *ngIf="!dateInvalid" class="mt-2 text-sm text-gray-500">
                DD/MM/YYYY
            </p>
            <p *ngIf="dateInvalid" class="mt-2 text-sm text-red-600">
                Asigne la fecha de su cita
            </p>
        </div>

        <!-- Hora de cita -->
        <div>
            <label for="hour" class="block text-sm font-medium text-gray-700 mb-2">
                Hora de cita <span class="text-red-500">*</span>
            </label>
            <input
                id="hour"
                type="time"
                formControlName="hour"
                format="hh:mm"
                min="09:00"
                max="18:00"
                step="900"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200"
                [class.border-red-500]="hourInvalid"
                [class.focus:ring-red-500]="hourInvalid"
            >
            <p *ngIf="hourInvalid" class="mt-2 text-sm text-red-600">
                Asigne la hora de su cita
            </p>
        </div>
    </div>

    <!-- Botón de Enviar -->
    <div class="flex justify-end">
        <button
            type="submit"
            [disabled]="form.invalid || spinner"
            class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"
        >
            <span *ngIf="!spinner">Enviar</span>
            <span *ngIf="spinner" class="flex items-center">
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Enviando...
            </span>
        </button>
    </div>
    </form>
</div>
